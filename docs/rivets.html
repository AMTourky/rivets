<!DOCTYPE html>  <html> <head>   <title>rivets.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               rivets.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <pre><code>rivets.js
version : 0.4.5
author : Michael Richards
license : MIT
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>The Rivets namespace.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Rivets = </span><span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Polyfill For String::trim.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">unless</span> <span class="nb">String</span><span class="o">::</span><span class="nx">trim</span> <span class="k">then</span> <span class="nb">String</span><span class="o">::</span><span class="nv">trim = </span><span class="o">-&gt;</span> <span class="nx">@replace</span> <span class="sr">/^\s+|\s+$/g</span><span class="p">,</span> <span class="s">&#39;&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>A single binding between a model attribute and a DOM element.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Rivets</span><span class="p">.</span><span class="nx">Binding</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>All information about the binding is passed into the constructor; the DOM
element, the type of binding, the model object and the keypath at which
to listen for changes.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">constructor: </span><span class="nf">(@el, @type, @model, @keypath, @options = {}) -&gt;</span>
    <span class="nx">unless</span> <span class="vi">@binder = </span><span class="nx">Rivets</span><span class="p">.</span><span class="nx">binders</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span>
      <span class="k">for</span> <span class="nx">identifier</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">Rivets</span><span class="p">.</span><span class="nx">binders</span>
        <span class="k">if</span> <span class="nx">identifier</span> <span class="o">isnt</span> <span class="s">&#39;*&#39;</span> <span class="o">and</span> <span class="nx">identifier</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)</span> <span class="o">isnt</span> <span class="o">-</span><span class="mi">1</span>
          <span class="nv">regexp = </span><span class="k">new</span> <span class="nb">RegExp</span> <span class="s">&quot;^</span><span class="si">#{</span><span class="nx">identifier</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;.+&#39;</span><span class="p">)</span><span class="si">}</span><span class="s">$&quot;</span>
          <span class="k">if</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">test</span> <span class="nx">type</span>
            <span class="vi">@binder = </span><span class="nx">value</span>
            <span class="vi">@args = </span><span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s">&quot;^</span><span class="si">#{</span><span class="nx">identifier</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;(.+)&#39;</span><span class="p">)</span><span class="si">}</span><span class="s">$&quot;</span><span class="p">).</span><span class="nx">exec</span> <span class="nx">type</span>
            <span class="nx">@args</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span>

    <span class="nx">@binder</span> <span class="o">or=</span> <span class="nx">Rivets</span><span class="p">.</span><span class="nx">binders</span><span class="p">[</span><span class="s">&#39;*&#39;</span><span class="p">]</span>

    <span class="k">if</span> <span class="nx">@binder</span> <span class="k">instanceof</span> <span class="nb">Function</span>
      <span class="vi">@binder = </span><span class="p">{</span><span class="nv">routine: </span><span class="nx">@binder</span><span class="p">}</span>

    <span class="vi">@formatters = </span><span class="nx">@options</span><span class="p">.</span><span class="nx">formatters</span> <span class="o">||</span> <span class="p">[]</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>Applies all the current formatters to the supplied value and returns the
formatted value.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">formattedValue: </span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="k">for</span> <span class="nx">formatter</span> <span class="k">in</span> <span class="nx">@formatters</span>
      <span class="nv">args = </span><span class="nx">formatter</span><span class="p">.</span><span class="nx">split</span> <span class="sr">/\s+/</span>
      <span class="nv">id = </span><span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span>

      <span class="nv">formatter = </span><span class="k">if</span> <span class="nx">@model</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span> <span class="k">instanceof</span> <span class="nb">Function</span>
        <span class="nx">@model</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>
      <span class="k">else</span>
        <span class="nx">Rivets</span><span class="p">.</span><span class="nx">formatters</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span>

      <span class="k">if</span> <span class="nx">formatter</span><span class="o">?</span><span class="p">.</span><span class="nx">read</span> <span class="k">instanceof</span> <span class="nb">Function</span>
        <span class="nv">value = </span><span class="nx">formatter</span><span class="p">.</span><span class="nx">read</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">args</span><span class="p">...</span>
      <span class="k">else</span> <span class="k">if</span> <span class="nx">formatter</span> <span class="k">instanceof</span> <span class="nb">Function</span>
        <span class="nv">value = </span><span class="nx">formatter</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">args</span><span class="p">...</span>

    <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Sets the value for the binding. This Basically just runs the binding routine
with the suplied value formatted.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">set: </span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nv">value = </span><span class="k">if</span> <span class="nx">value</span> <span class="k">instanceof</span> <span class="nb">Function</span> <span class="o">and</span> <span class="o">!</span><span class="nx">@binder</span><span class="p">.</span><span class="nx">function</span>
      <span class="nx">@formattedValue</span> <span class="nx">value</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@model</span>
    <span class="k">else</span>
      <span class="nx">@formattedValue</span> <span class="nx">value</span>

    <span class="nx">@binder</span><span class="p">.</span><span class="nx">routine</span><span class="o">?</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@el</span><span class="p">,</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>Syncs up the view binding with the model.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">sync: </span><span class="o">=&gt;</span>
    <span class="nx">@set</span> <span class="k">if</span> <span class="nx">@options</span><span class="p">.</span><span class="nx">bypass</span>
      <span class="nx">@model</span><span class="p">[</span><span class="nx">@keypath</span><span class="p">]</span>
    <span class="k">else</span>
      <span class="nx">Rivets</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">adapter</span><span class="p">.</span><span class="nx">read</span> <span class="nx">@model</span><span class="p">,</span> <span class="nx">@keypath</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>Publishes the value currently set on the input element back to the model.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">publish: </span><span class="o">=&gt;</span> 
    <span class="nv">value = </span><span class="nx">getInputValue</span> <span class="nx">@el</span>

    <span class="k">for</span> <span class="nx">formatter</span> <span class="k">in</span> <span class="nx">@formatters</span><span class="p">.</span><span class="nx">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">).</span><span class="nx">reverse</span><span class="p">()</span>
      <span class="nv">args = </span><span class="nx">formatter</span><span class="p">.</span><span class="nx">split</span> <span class="sr">/\s+/</span>
      <span class="nv">id = </span><span class="nx">args</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span>

      <span class="k">if</span> <span class="nx">Rivets</span><span class="p">.</span><span class="nx">formatters</span><span class="p">[</span><span class="nx">id</span><span class="p">]</span><span class="o">?</span><span class="p">.</span><span class="nx">publish</span>
        <span class="nv">value = </span><span class="nx">Rivets</span><span class="p">.</span><span class="nx">formatters</span><span class="p">[</span><span class="nx">id</span><span class="p">].</span><span class="nx">publish</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">args</span><span class="p">...</span>

    <span class="nx">Rivets</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">adapter</span><span class="p">.</span><span class="nx">publish</span> <span class="nx">@model</span><span class="p">,</span> <span class="nx">@keypath</span><span class="p">,</span> <span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>Subscribes to the model for changes at the specified keypath. Bi-directional
routines will also listen for changes on the element to propagate them back
to the model.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">bind: </span><span class="o">=&gt;</span>
    <span class="nx">@binder</span><span class="p">.</span><span class="nx">bind</span><span class="o">?</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@el</span>

    <span class="k">if</span> <span class="nx">@options</span><span class="p">.</span><span class="nx">bypass</span>
      <span class="nx">@sync</span><span class="p">()</span>
    <span class="k">else</span>
      <span class="nx">Rivets</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">adapter</span><span class="p">.</span><span class="nx">subscribe</span> <span class="nx">@model</span><span class="p">,</span> <span class="nx">@keypath</span><span class="p">,</span> <span class="nx">@sync</span>
      <span class="nx">@sync</span><span class="p">()</span> <span class="k">if</span> <span class="nx">Rivets</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">preloadData</span>

    <span class="k">if</span> <span class="nx">@options</span><span class="p">.</span><span class="nx">dependencies</span><span class="o">?</span><span class="p">.</span><span class="nx">length</span>
      <span class="k">for</span> <span class="nx">dependency</span> <span class="k">in</span> <span class="nx">@options</span><span class="p">.</span><span class="nx">dependencies</span>
        <span class="k">if</span> <span class="sr">/^\./</span><span class="p">.</span><span class="nx">test</span> <span class="nx">dependency</span>
          <span class="nv">model = </span><span class="nx">@model</span>
          <span class="nv">keypath = </span><span class="nx">dependency</span><span class="p">.</span><span class="nx">substr</span> <span class="mi">1</span>
        <span class="k">else</span>
          <span class="nv">dependency = </span><span class="nx">dependency</span><span class="p">.</span><span class="nx">split</span> <span class="s">&#39;.&#39;</span>
          <span class="nv">model = </span><span class="nx">@view</span><span class="p">.</span><span class="nx">models</span><span class="p">[</span><span class="nx">dependency</span><span class="p">.</span><span class="nx">shift</span><span class="p">()]</span>
          <span class="nv">keypath = </span><span class="nx">dependency</span><span class="p">.</span><span class="nx">join</span> <span class="s">&#39;.&#39;</span>

        <span class="nx">Rivets</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">adapter</span><span class="p">.</span><span class="nx">subscribe</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">keypath</span><span class="p">,</span> <span class="nx">@sync</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Unsubscribes from the model and the element.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">unbind: </span><span class="o">=&gt;</span>
    <span class="nx">@binder</span><span class="p">.</span><span class="nx">unbind</span><span class="o">?</span><span class="p">.</span><span class="nx">call</span> <span class="nx">@</span><span class="p">,</span> <span class="nx">@el</span>

    <span class="nx">unless</span> <span class="nx">@options</span><span class="p">.</span><span class="nx">bypass</span>
      <span class="nx">Rivets</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">adapter</span><span class="p">.</span><span class="nx">unsubscribe</span> <span class="nx">@model</span><span class="p">,</span> <span class="nx">@keypath</span><span class="p">,</span> <span class="nx">@sync</span>

    <span class="k">if</span> <span class="nx">@options</span><span class="p">.</span><span class="nx">dependencies</span><span class="o">?</span><span class="p">.</span><span class="nx">length</span>
      <span class="k">for</span> <span class="nx">dependency</span> <span class="k">in</span> <span class="nx">@options</span><span class="p">.</span><span class="nx">dependencies</span>
        <span class="k">if</span> <span class="sr">/^\./</span><span class="p">.</span><span class="nx">test</span> <span class="nx">dependency</span>
          <span class="nv">model = </span><span class="nx">@model</span>
          <span class="nv">keypath = </span><span class="nx">dependency</span><span class="p">.</span><span class="nx">substr</span> <span class="mi">1</span>
        <span class="k">else</span>
          <span class="nv">dependency = </span><span class="nx">dependency</span><span class="p">.</span><span class="nx">split</span> <span class="s">&#39;.&#39;</span>
          <span class="nv">model = </span><span class="nx">@view</span><span class="p">.</span><span class="nx">models</span><span class="p">[</span><span class="nx">dependency</span><span class="p">.</span><span class="nx">shift</span><span class="p">()]</span>
          <span class="nv">keypath = </span><span class="nx">dependency</span><span class="p">.</span><span class="nx">join</span> <span class="s">&#39;.&#39;</span>

        <span class="nx">Rivets</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">adapter</span><span class="p">.</span><span class="nx">unsubscribe</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">keypath</span><span class="p">,</span> <span class="nx">@sync</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>A collection of bindings built from a set of parent elements.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">class</span> <span class="nx">Rivets</span><span class="p">.</span><span class="nx">View</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>The DOM elements and the model objects for binding are passed into the
constructor.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">constructor: </span><span class="nf">(@els, @models) -&gt;</span>
    <span class="vi">@els = </span><span class="p">[</span><span class="nx">@els</span><span class="p">]</span> <span class="nx">unless</span> <span class="p">(</span><span class="nx">@els</span><span class="p">.</span><span class="nx">jquery</span> <span class="o">||</span> <span class="nx">@els</span> <span class="k">instanceof</span> <span class="nb">Array</span><span class="p">)</span>
    <span class="nx">@build</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Regular expression used to match binding attributes.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">bindingRegExp: </span><span class="o">=&gt;</span>
    <span class="nv">prefix = </span><span class="nx">Rivets</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">prefix</span>
    <span class="k">if</span> <span class="nx">prefix</span> <span class="k">then</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span><span class="s">&quot;^data-</span><span class="si">#{</span><span class="nx">prefix</span><span class="si">}</span><span class="s">-&quot;</span><span class="p">)</span> <span class="k">else</span> <span class="sr">/^data-/</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Parses the DOM tree and builds Rivets.Binding instances for every matched
binding declaration. Subsequent calls to build will replace the previous
Rivets.Binding instances with new ones, so be sure to unbind them first.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">build: </span><span class="o">=&gt;</span>
    <span class="vi">@bindings = </span><span class="p">[]</span>
    <span class="nv">skipNodes = </span><span class="p">[]</span>
    <span class="nv">bindingRegExp = </span><span class="nx">@bindingRegExp</span><span class="p">()</span>

    <span class="nv">parse = </span><span class="p">(</span><span class="nx">node</span><span class="p">)</span> <span class="o">=&gt;</span>
      <span class="nx">unless</span> <span class="nx">node</span> <span class="k">in</span> <span class="nx">skipNodes</span>
        <span class="k">for</span> <span class="nx">attribute</span> <span class="k">in</span> <span class="nx">node</span><span class="p">.</span><span class="nx">attributes</span>
          <span class="k">if</span> <span class="nx">bindingRegExp</span><span class="p">.</span><span class="nx">test</span> <span class="nx">attribute</span><span class="p">.</span><span class="nx">name</span>
            <span class="nv">type = </span><span class="nx">attribute</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">replace</span> <span class="nx">bindingRegExp</span><span class="p">,</span> <span class="s">&#39;&#39;</span>
            <span class="nx">unless</span> <span class="nv">binder = </span><span class="nx">Rivets</span><span class="p">.</span><span class="nx">binders</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span>
              <span class="k">for</span> <span class="nx">identifier</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">Rivets</span><span class="p">.</span><span class="nx">binders</span>
                <span class="k">if</span> <span class="nx">identifier</span> <span class="o">isnt</span> <span class="s">&#39;*&#39;</span> <span class="o">and</span> <span class="nx">identifier</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">)</span> <span class="o">isnt</span> <span class="o">-</span><span class="mi">1</span>
                  <span class="nv">regexp = </span><span class="k">new</span> <span class="nb">RegExp</span> <span class="s">&quot;^</span><span class="si">#{</span><span class="nx">identifier</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s">&#39;*&#39;</span><span class="p">,</span> <span class="s">&#39;.+&#39;</span><span class="p">)</span><span class="si">}</span><span class="s">$&quot;</span>
                  <span class="k">if</span> <span class="nx">regexp</span><span class="p">.</span><span class="nx">test</span> <span class="nx">type</span>
                    <span class="nv">binder = </span><span class="nx">value</span>

            <span class="nx">binder</span> <span class="o">or=</span> <span class="nx">Rivets</span><span class="p">.</span><span class="nx">binders</span><span class="p">[</span><span class="s">&#39;*&#39;</span><span class="p">]</span>

            <span class="k">if</span> <span class="nx">binder</span><span class="p">.</span><span class="nx">block</span>
              <span class="nx">skipNodes</span><span class="p">.</span><span class="nx">push</span> <span class="nx">n</span> <span class="k">for</span> <span class="nx">n</span> <span class="k">in</span> <span class="nx">node</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="s">&#39;*&#39;</span>
              <span class="nv">attributes = </span><span class="p">[</span><span class="nx">attribute</span><span class="p">]</span>

        <span class="k">for</span> <span class="nx">attribute</span> <span class="k">in</span> <span class="nx">attributes</span> <span class="o">or</span> <span class="nx">node</span><span class="p">.</span><span class="nx">attributes</span>
          <span class="k">if</span> <span class="nx">bindingRegExp</span><span class="p">.</span><span class="nx">test</span> <span class="nx">attribute</span><span class="p">.</span><span class="nx">name</span>
            <span class="nv">options = </span><span class="p">{}</span>

            <span class="nv">type = </span><span class="nx">attribute</span><span class="p">.</span><span class="nx">name</span><span class="p">.</span><span class="nx">replace</span> <span class="nx">bindingRegExp</span><span class="p">,</span> <span class="s">&#39;&#39;</span>
            <span class="nv">pipes = </span><span class="p">(</span><span class="nx">pipe</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="k">for</span> <span class="nx">pipe</span> <span class="k">in</span> <span class="nx">attribute</span><span class="p">.</span><span class="nx">value</span><span class="p">.</span><span class="nx">split</span> <span class="s">&#39;|&#39;</span><span class="p">)</span>
            <span class="nv">context = </span><span class="p">(</span><span class="nx">ctx</span><span class="p">.</span><span class="nx">trim</span><span class="p">()</span> <span class="k">for</span> <span class="nx">ctx</span> <span class="k">in</span> <span class="nx">pipes</span><span class="p">.</span><span class="nx">shift</span><span class="p">().</span><span class="nx">split</span> <span class="s">&#39;&lt;&#39;</span><span class="p">)</span>
            <span class="nv">path = </span><span class="nx">context</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span>
            <span class="nv">splitPath = </span><span class="nx">path</span><span class="p">.</span><span class="nx">split</span> <span class="sr">/\.|:/</span>
            <span class="nv">options.formatters = </span><span class="nx">pipes</span>
            <span class="nv">options.bypass = </span><span class="nx">path</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s">&#39;:&#39;</span><span class="p">)</span> <span class="o">!=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">if</span> <span class="nx">splitPath</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
              <span class="nv">model = </span><span class="nx">@models</span><span class="p">[</span><span class="nx">splitPath</span><span class="p">.</span><span class="nx">shift</span><span class="p">()]</span>
            <span class="k">else</span>
              <span class="nv">model = </span><span class="nx">@models</span>
              <span class="nx">splitPath</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span>
            <span class="nv">keypath = </span><span class="nx">splitPath</span><span class="p">.</span><span class="nx">join</span> <span class="s">&#39;.&#39;</span>

            <span class="k">if</span> <span class="nx">model</span>
              <span class="k">if</span> <span class="nv">dependencies = </span><span class="nx">context</span><span class="p">.</span><span class="nx">shift</span><span class="p">()</span>
                <span class="nv">options.dependencies = </span><span class="nx">dependencies</span><span class="p">.</span><span class="nx">split</span> <span class="sr">/\s+/</span>

              <span class="nv">binding = </span><span class="k">new</span> <span class="nx">Rivets</span><span class="p">.</span><span class="nx">Binding</span> <span class="nx">node</span><span class="p">,</span> <span class="nx">type</span><span class="p">,</span> <span class="nx">model</span><span class="p">,</span> <span class="nx">keypath</span><span class="p">,</span> <span class="nx">options</span>
              <span class="nv">binding.view = </span><span class="nx">@</span>

              <span class="nx">@bindings</span><span class="p">.</span><span class="nx">push</span> <span class="nx">binding</span>

        <span class="nv">attributes = </span><span class="kc">null</span> <span class="k">if</span> <span class="nx">attributes</span>

      <span class="k">return</span>

    <span class="k">for</span> <span class="nx">el</span> <span class="k">in</span> <span class="nx">@els</span>
      <span class="nx">parse</span> <span class="nx">el</span>
      <span class="nx">parse</span> <span class="nx">node</span> <span class="k">for</span> <span class="nx">node</span> <span class="k">in</span> <span class="nx">el</span><span class="p">.</span><span class="nx">getElementsByTagName</span> <span class="s">&#39;*&#39;</span> <span class="k">when</span> <span class="nx">node</span><span class="p">.</span><span class="nx">attributes</span><span class="o">?</span>

    <span class="k">return</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Returns an array of bindings where the supplied function evaluates to true.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">select: </span><span class="p">(</span><span class="nx">fn</span><span class="p">)</span> <span class="o">=&gt;</span>
    <span class="nx">binding</span> <span class="k">for</span> <span class="nx">binding</span> <span class="k">in</span> <span class="nx">@bindings</span> <span class="k">when</span> <span class="nx">fn</span> <span class="nx">binding</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>Binds all of the current bindings for this view.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">bind: </span><span class="o">=&gt;</span>
    <span class="nx">binding</span><span class="p">.</span><span class="nx">bind</span><span class="p">()</span> <span class="k">for</span> <span class="nx">binding</span> <span class="k">in</span> <span class="nx">@bindings</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Unbinds all of the current bindings for this view.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">unbind: </span><span class="o">=&gt;</span>
    <span class="nx">binding</span><span class="p">.</span><span class="nx">unbind</span><span class="p">()</span> <span class="k">for</span> <span class="nx">binding</span> <span class="k">in</span> <span class="nx">@bindings</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Syncs up the view with the model by running the routines on all bindings.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">sync: </span><span class="o">=&gt;</span>
    <span class="nx">binding</span><span class="p">.</span><span class="nx">sync</span><span class="p">()</span> <span class="k">for</span> <span class="nx">binding</span> <span class="k">in</span> <span class="nx">@bindings</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <p>Publishes the input values from the view back to the model (reverse sync).</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">publish: </span><span class="o">=&gt;</span>
    <span class="nx">binding</span><span class="p">.</span><span class="nx">publish</span><span class="p">()</span> <span class="k">for</span> <span class="nx">binding</span> <span class="k">in</span> <span class="nx">@select</span> <span class="nf">(b) -&gt;</span> <span class="nx">b</span><span class="p">.</span><span class="nx">binder</span><span class="p">.</span><span class="nx">publishes</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>Cross-browser event binding.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">bindEvent = </span><span class="nf">(el, event, handler, context) -&gt;</span>
  <span class="nv">fn = </span><span class="nf">(e) -&gt;</span> <span class="nx">handler</span><span class="p">.</span><span class="nx">call</span> <span class="nx">context</span><span class="p">,</span> <span class="nx">e</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <p>Check to see if jQuery is loaded.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="o">?</span>
    <span class="nv">el = </span><span class="nx">jQuery</span> <span class="nx">el</span>
    <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="kc">on</span><span class="o">?</span> <span class="k">then</span> <span class="nx">el</span><span class="p">.</span><span class="kc">on</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span> <span class="k">else</span> <span class="nx">el</span><span class="p">.</span><span class="nx">bind</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <p>Check to see if addEventListener is available.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">else</span> <span class="k">if</span> <span class="nb">window</span><span class="p">.</span><span class="nx">addEventListener</span><span class="o">?</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">addEventListener</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="kc">false</span>
  <span class="k">else</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>Assume we are in IE and use attachEvent.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">event = </span><span class="s">&#39;on&#39;</span> <span class="o">+</span> <span class="nx">event</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">attachEvent</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span>

  <span class="nx">fn</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Cross-browser event unbinding.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">unbindEvent = </span><span class="nf">(el, event, fn) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>Check to see if jQuery is loaded.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="nb">window</span><span class="p">.</span><span class="nx">jQuery</span><span class="o">?</span>
    <span class="nv">el = </span><span class="nx">jQuery</span> <span class="nx">el</span>
    <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="kc">off</span><span class="o">?</span> <span class="k">then</span> <span class="nx">el</span><span class="p">.</span><span class="kc">off</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span> <span class="k">else</span> <span class="nx">el</span><span class="p">.</span><span class="nx">unbind</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Check to see if addEventListener is available.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">else</span> <span class="k">if</span> <span class="nb">window</span><span class="p">.</span><span class="nx">removeEventListener</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">removeEventListener</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span><span class="p">,</span> <span class="kc">false</span>
  <span class="k">else</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Assume we are in IE and use attachEvent.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">event = </span><span class="s">&#39;on&#39;</span> <span class="o">+</span> <span class="nx">event</span>
    <span class="nx">el</span><span class="p">.</span><span class="nx">detachEvent</span>  <span class="nx">event</span><span class="p">,</span> <span class="nx">fn</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <p>Returns the current input value for the specified element.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">getInputValue = </span><span class="nf">(el) -&gt;</span>
  <span class="k">switch</span> <span class="nx">el</span><span class="p">.</span><span class="nx">type</span>
    <span class="k">when</span> <span class="s">&#39;checkbox&#39;</span> <span class="k">then</span> <span class="nx">el</span><span class="p">.</span><span class="nx">checked</span>
    <span class="k">when</span> <span class="s">&#39;select-multiple&#39;</span> <span class="k">then</span> <span class="nx">o</span><span class="p">.</span><span class="nx">value</span> <span class="k">for</span> <span class="nx">o</span> <span class="k">in</span> <span class="nx">el</span> <span class="k">when</span> <span class="nx">o</span><span class="p">.</span><span class="nx">selected</span>
    <span class="k">else</span> <span class="nx">el</span><span class="p">.</span><span class="nx">value</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <p>Core binding routines.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Rivets.binders =</span>
  <span class="nv">enabled: </span><span class="nf">(el, value) -&gt;</span>
    <span class="nv">el.disabled = </span><span class="o">!</span><span class="nx">value</span>

  <span class="nv">disabled: </span><span class="nf">(el, value) -&gt;</span>
    <span class="nv">el.disabled = </span><span class="o">!!</span><span class="nx">value</span>

  <span class="nv">checked:</span>
    <span class="nv">publishes: </span><span class="kc">true</span>
    <span class="nv">bind: </span><span class="nf">(el) -&gt;</span>
      <span class="vi">@currentListener = </span><span class="nx">bindEvent</span> <span class="nx">el</span><span class="p">,</span> <span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="nx">@publish</span>
    <span class="nv">unbind: </span><span class="nf">(el) -&gt;</span>
      <span class="nx">unbindEvent</span> <span class="nx">el</span><span class="p">,</span> <span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="nx">@currentListener</span>
    <span class="nv">routine: </span><span class="nf">(el, value) -&gt;</span>
      <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&#39;radio&#39;</span>
        <span class="nv">el.checked = </span><span class="nx">el</span><span class="p">.</span><span class="nx">value</span> <span class="o">is</span> <span class="nx">value</span>
      <span class="k">else</span>
        <span class="nv">el.checked = </span><span class="o">!!</span><span class="nx">value</span>

  <span class="nv">unchecked:</span>
    <span class="nv">publishes: </span><span class="kc">true</span>
    <span class="nv">bind: </span><span class="nf">(el) -&gt;</span>
      <span class="vi">@currentListener = </span><span class="nx">bindEvent</span> <span class="nx">el</span><span class="p">,</span> <span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="nx">@publish</span>
    <span class="nv">unbind: </span><span class="nf">(el) -&gt;</span>
      <span class="nx">unbindEvent</span> <span class="nx">el</span><span class="p">,</span> <span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="nx">@currentListener</span>
    <span class="nv">routine: </span><span class="nf">(el, value) -&gt;</span>
      <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&#39;radio&#39;</span>
        <span class="nv">el.checked = </span><span class="nx">el</span><span class="p">.</span><span class="nx">value</span> <span class="o">isnt</span> <span class="nx">value</span>
      <span class="k">else</span>
        <span class="nv">el.checked = </span><span class="o">!</span><span class="nx">value</span>

  <span class="nv">show: </span><span class="nf">(el, value) -&gt;</span>
    <span class="nv">el.style.display = </span><span class="k">if</span> <span class="nx">value</span> <span class="k">then</span> <span class="s">&#39;&#39;</span> <span class="k">else</span> <span class="s">&#39;none&#39;</span>

  <span class="nv">hide: </span><span class="nf">(el, value) -&gt;</span>
    <span class="nv">el.style.display = </span><span class="k">if</span> <span class="nx">value</span> <span class="k">then</span> <span class="s">&#39;none&#39;</span> <span class="k">else</span> <span class="s">&#39;&#39;</span>

  <span class="nv">html: </span><span class="nf">(el, value) -&gt;</span>
    <span class="nv">el.innerHTML = </span><span class="k">if</span> <span class="nx">value</span><span class="o">?</span> <span class="k">then</span> <span class="nx">value</span> <span class="k">else</span> <span class="s">&#39;&#39;</span>

  <span class="nv">value:</span>
    <span class="nv">publishes: </span><span class="kc">true</span>
    <span class="nv">bind: </span><span class="nf">(el) -&gt;</span>
      <span class="vi">@currentListener = </span><span class="nx">bindEvent</span> <span class="nx">el</span><span class="p">,</span> <span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="nx">@publish</span>
    <span class="nv">unbind: </span><span class="nf">(el) -&gt;</span>
      <span class="nx">unbindEvent</span> <span class="nx">el</span><span class="p">,</span> <span class="s">&#39;change&#39;</span><span class="p">,</span> <span class="nx">@currentListener</span>
    <span class="nv">routine: </span><span class="nf">(el, value) -&gt;</span>
      <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="s">&#39;select-multiple&#39;</span>
        <span class="nv">o.selected = </span><span class="nx">o</span><span class="p">.</span><span class="nx">value</span> <span class="k">in</span> <span class="nx">value</span> <span class="k">for</span> <span class="nx">o</span> <span class="k">in</span> <span class="nx">el</span> <span class="k">if</span> <span class="nx">value</span><span class="o">?</span>
      <span class="k">else</span>
        <span class="nv">el.value = </span><span class="k">if</span> <span class="nx">value</span><span class="o">?</span> <span class="k">then</span> <span class="nx">value</span> <span class="k">else</span> <span class="s">&#39;&#39;</span>

  <span class="nv">text: </span><span class="nf">(el, value) -&gt;</span>
    <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="nx">innerText</span><span class="o">?</span>
      <span class="nv">el.innerText = </span><span class="k">if</span> <span class="nx">value</span><span class="o">?</span> <span class="k">then</span> <span class="nx">value</span> <span class="k">else</span> <span class="s">&#39;&#39;</span>
    <span class="k">else</span>
      <span class="nv">el.textContent = </span><span class="k">if</span> <span class="nx">value</span><span class="o">?</span> <span class="k">then</span> <span class="nx">value</span> <span class="k">else</span> <span class="s">&#39;&#39;</span>

  <span class="s">&quot;on-*&quot;</span><span class="o">:</span>
    <span class="nv">function: </span><span class="kc">true</span>
    <span class="nv">routine: </span><span class="nf">(el, value) -&gt;</span>
      <span class="nx">unbindEvent</span> <span class="nx">el</span><span class="p">,</span> <span class="nx">@args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">@currentListener</span> <span class="k">if</span> <span class="nx">@currentListener</span>
      <span class="vi">@currentListener = </span><span class="nx">bindEvent</span> <span class="nx">el</span><span class="p">,</span> <span class="nx">@args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">@model</span>

  <span class="s">&quot;each-*&quot;</span><span class="o">:</span>
    <span class="nv">block: </span><span class="kc">true</span>
    <span class="nv">bind: </span><span class="nf">(el, collection) -&gt;</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">removeAttribute</span> <span class="p">[</span><span class="s">&#39;data&#39;</span><span class="p">,</span> <span class="nx">rivets</span><span class="p">.</span><span class="nx">config</span><span class="p">.</span><span class="nx">prefix</span><span class="p">,</span> <span class="nx">@type</span><span class="p">].</span><span class="nx">join</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">).</span><span class="nx">replace</span> <span class="s">&#39;--&#39;</span><span class="p">,</span> <span class="s">&#39;-&#39;</span>
    <span class="nv">routine: </span><span class="nf">(el, collection) -&gt;</span>
      <span class="k">if</span> <span class="nx">@iterated</span><span class="o">?</span>
        <span class="k">for</span> <span class="nx">view</span> <span class="k">in</span> <span class="nx">@iterated</span>
          <span class="nx">view</span><span class="p">.</span><span class="nx">unbind</span><span class="p">()</span>
          <span class="nx">e</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span> <span class="nx">e</span> <span class="k">for</span> <span class="nx">e</span> <span class="k">in</span> <span class="nx">view</span><span class="p">.</span><span class="nx">els</span>
      <span class="k">else</span>
        <span class="vi">@marker = </span><span class="nb">document</span><span class="p">.</span><span class="nx">createComment</span> <span class="s">&quot; rivets: </span><span class="si">#{</span><span class="nx">@type</span><span class="si">}</span><span class="s"> &quot;</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span> <span class="nx">@marker</span><span class="p">,</span> <span class="nx">el</span>
        <span class="nx">el</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">removeChild</span> <span class="nx">el</span>

      <span class="vi">@iterated = </span><span class="p">[]</span>

      <span class="k">if</span> <span class="nx">collection</span>
        <span class="k">for</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">collection</span>
          <span class="nv">data = </span><span class="p">{}</span>
          <span class="nx">data</span><span class="p">[</span><span class="nx">n</span><span class="p">]</span> <span class="o">=</span> <span class="nx">m</span> <span class="k">for</span> <span class="nx">n</span><span class="p">,</span> <span class="nx">m</span> <span class="k">of</span> <span class="nx">@view</span><span class="p">.</span><span class="nx">models</span>
          <span class="nx">data</span><span class="p">[</span><span class="nx">@args</span><span class="p">[</span><span class="mi">0</span><span class="p">]]</span> <span class="o">=</span> <span class="nx">item</span>
          <span class="nv">itemEl = </span><span class="nx">el</span><span class="p">.</span><span class="nx">cloneNode</span> <span class="kc">true</span>
          <span class="k">if</span> <span class="nx">@iterated</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span>
            <span class="nv">previous = </span><span class="nx">@iterated</span><span class="p">[</span><span class="nx">@iterated</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span><span class="p">].</span><span class="nx">els</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
          <span class="k">else</span>
            <span class="nv">previous = </span><span class="nx">@marker</span>
          <span class="nx">@marker</span><span class="p">.</span><span class="nx">parentNode</span><span class="p">.</span><span class="nx">insertBefore</span> <span class="nx">itemEl</span><span class="p">,</span> <span class="nx">previous</span><span class="p">.</span><span class="nx">nextSibling</span> <span class="o">?</span> <span class="kc">null</span>
          <span class="nx">@iterated</span><span class="p">.</span><span class="nx">push</span> <span class="nx">rivets</span><span class="p">.</span><span class="nx">bind</span> <span class="nx">itemEl</span><span class="p">,</span> <span class="nx">data</span>

  <span class="s">&quot;class-*&quot;</span><span class="o">:</span> <span class="nf">(el, value) -&gt;</span>
    <span class="nv">elClass = </span><span class="s">&quot; </span><span class="si">#{</span><span class="nx">el</span><span class="p">.</span><span class="nx">className</span><span class="si">}</span><span class="s"> &quot;</span>

    <span class="k">if</span> <span class="o">!</span><span class="nx">value</span> <span class="o">is</span> <span class="p">(</span><span class="nx">elClass</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s">&quot; </span><span class="si">#{</span><span class="nx">@args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s"> &quot;</span><span class="p">)</span> <span class="o">isnt</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>
      <span class="nv">el.className = </span><span class="k">if</span> <span class="nx">value</span>
        <span class="s">&quot;</span><span class="si">#{</span><span class="nx">el</span><span class="p">.</span><span class="nx">className</span><span class="si">}</span><span class="s"> </span><span class="si">#{</span><span class="nx">@args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s">&quot;</span>
      <span class="k">else</span>
        <span class="nx">elClass</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="s">&quot; </span><span class="si">#{</span><span class="nx">@args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="s"> &quot;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">).</span><span class="nx">trim</span><span class="p">()</span>

  <span class="s">&quot;*&quot;</span><span class="o">:</span> <span class="nf">(el, value) -&gt;</span>
    <span class="k">if</span> <span class="nx">value</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">setAttribute</span> <span class="nx">@type</span><span class="p">,</span> <span class="nx">value</span>
    <span class="k">else</span>
      <span class="nx">el</span><span class="p">.</span><span class="nx">removeAttribute</span> <span class="nx">@type</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <p>Default configuration.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Rivets.config =</span>
  <span class="nv">preloadData: </span><span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <p>Default formatters. There aren't any.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">Rivets.formatters = </span><span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <p>The rivets module. This is the public interface that gets exported.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">rivets =</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <p>Exposes the core binding routines that can be extended or stripped down.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">binders: </span><span class="nx">Rivets</span><span class="p">.</span><span class="nx">binders</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <p>Exposes the formatters object to be extended.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">formatters: </span><span class="nx">Rivets</span><span class="p">.</span><span class="nx">formatters</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <p>Exposes the rivets configuration options. These can be set manually or from
rivets.configure with an object literal.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">config: </span><span class="nx">Rivets</span><span class="p">.</span><span class="nx">config</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <p>Sets configuration options by merging an object literal.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">configure: </span><span class="nf">(options={}) -&gt;</span>
    <span class="k">for</span> <span class="nx">property</span><span class="p">,</span> <span class="nx">value</span> <span class="k">of</span> <span class="nx">options</span>
      <span class="nx">Rivets</span><span class="p">.</span><span class="nx">config</span><span class="p">[</span><span class="nx">property</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
    <span class="k">return</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <p>Binds a set of model objects to a parent DOM element. Returns a Rivets.View
instance.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">bind: </span><span class="nf">(el, models = {}) -&gt;</span>
    <span class="nv">view = </span><span class="k">new</span> <span class="nx">Rivets</span><span class="p">.</span><span class="nx">View</span><span class="p">(</span><span class="nx">el</span><span class="p">,</span> <span class="nx">models</span><span class="p">)</span>
    <span class="nx">view</span><span class="p">.</span><span class="nx">bind</span><span class="p">()</span>
    <span class="nx">view</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <p>Exports rivets for both CommonJS and the browser.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="k">if</span> <span class="nx">module</span><span class="o">?</span>
  <span class="nv">module.exports = </span><span class="nx">rivets</span>
<span class="k">else</span>
  <span class="vi">@rivets = </span><span class="nx">rivets</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 